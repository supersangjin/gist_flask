<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="Readeon">
  <meta name="author" content="Readeon Team">
  <title>Readeon</title>
  <!-- styles -->
  <!-- bootstrap4 css -->
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/css/bootstrap.min.css" integrity="sha384-PsH8R72JQ3SOdhVi3uxftmaW6Vc51MKb0q5P2rRUpPvrszuE4W1povHYgTpBfshb" crossorigin="anonymous">

  <!-- github markdown css -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/github-markdown-css/2.9.0/github-markdown.css">

  <!-- markdown editor -->
  {{ simplemde.css }}
  {{ simplemde.js }}

  <!-- video.js -->
  <link href="http://vjs.zencdn.net/6.4.0/video-js.css" rel="stylesheet">
  <!-- If you'd like to support IE8 -->
  <script src="http://vjs.zencdn.net/ie8/1.1.2/videojs-ie8.min.js"></script>

  <!-- custom style -->
  <link rel="stylesheet" href="{{ url_for('static', filename='css/main?version=24.css') }}">
  <!--<link rel="stylesheet" href="{{ url_for('static', filename='css/mdb.min.css') }}">-->

  <!-- Font Awesome for vector icon -->
  <link href="https://use.fontawesome.com/releases/v5.0.2/css/all.css" rel="stylesheet">

  <!-- react js -->
  <script src="https://unpkg.com/react@15.3.0/dist/react.js"></script>
  <script src="https://unpkg.com/react-dom@15.3.0/dist/react-dom.js"></script>
  <script src="https://unpkg.com/babel-standalone@6.15.0/babel.min.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://unpkg.com/remarkable@1.7.1/dist/remarkable.min.js"></script>

  <!-- purify html string -->
  <script type="text/javascript" src="{{ url_for('static', filename='js/purify.min.js') }}"></script>

<style type="text/css"> /*TODO: custom style css file로 옮길것*/

  @import url('https://fonts.googleapis.com/css?family=Montserrat:300,400|Nunito:400,700,900|Roboto:400,100,100italic,300,300italic,400italic,500,500italic,700,700italic,900,900italic');


  * {
    font-family: "Roboto", Arial, sans-serif;
    font-weight: 300;
  }

.view {
  overflow: hidden;
  position: relative;
  cursor: default; }
  .view .mask {
    background-attachment: fixed; }
  .view .mask,
  .view .full-bg-img {
    width: 100%;
    height: 100%;
    position: absolute;
    overflow: hidden;
    top: 0;
    left: 0; }
  .view img, .view video {
    display: block;
    position: relative; }

.hm-zoom img,
.hm-zoom video,
.overlay img,
.overlay video {
  -webkit-transition: all 0.2s linear;
  transition: all 0.2s linear; }

.hm-zoom:hover .mask,
.overlay:hover .mask {
  opacity: 1; }

.hm-zoom:hover img {
  -webkit-transform: scale(1.1);
  -ms-transform: scale(1.1);
  transform: scale(1.1); }

.pagination-page-info {
    padding: .6em;
    padding-left: 0;
    width: 40em;
    margin: .5em;
    margin-left: 0;
    font-size: 12px;
}
.pagination-page-info b {
    color: black;
    background: #6aa6ed;
    padding-left: 2px;
    padding: .1em .25em;
    font-size: 150%;
}

.navbar-nav li a {
    padding-top: 0;
}

.navbar-center {
    display: inline-block;
    float: none;
}

.navbar-search {
  outline: none;
  box-shadow:none !important;
  border:1px solid #ccc !important;
  border-left: 0 !important;

  min-height: 30px;
  height: 40px !important;
  width: 4vw;
}

.sidenav {
  height: 100%; /* 100% Full-height */
  width: 0; /* 0 width - change this with JavaScript */
  position: fixed; /* Stay in place */
  z-index: 2000; /* Stay on top */
  top: 0; /* Stay at the top */
  bottom: 0;
  right: 0;
  overflow-y: scroll;
  border-left: 1px solid;
  background-color: white;
  transition: 0.5s; /* 0.5 second transition effect to slide in the sidenav */
}

.vertical-type-btn-group button {
  background-color: white;
  color: gray;
  font-size: 9pt;
  width: 80px !important;
  height: 80px !important;
  text-align: center;
  border: whitesmoke solid 1px;
}
.vertical-type-btn-group i {
  font-size: 20pt;
}

.vertical-type-btn-group {
  top: 60px;
  position: fixed;
  z-index: 10;
}

.navbar {
  height: 60px !important;
  vertical-align: middle !important;
}

.footer {
  height: auto;
  width: 100%;
  padding: 50px;
  color: gray;
  font-size: 10pt;
  text-align: center;

  
}

.horizontal-type-btn-group {
    position: fixed;
    top: 60px;
    height: 45px;
    width: 100%;
    background-color: white;
    box-shadow: 1px 1px 5px lightgrey;
    z-index: 2;
    padding-left: 20px;
    padding-right: 20px;
    text-align: center;
    display: none;
  }

.horizontal-type-btn-group .btn-group-box {
  display: block;
  margin-top: 11px;
}

.horizontal-type-btn-group a {
  font-size: 11pt;
  color: black !important;
  text-decoration: none;
  margin-left: 20px;
  margin-right: 20px;
}

/*
.search-input {
  background: transparent;
}
*/

@media (max-width: 992px) {
  .vertical-type-btn-group {
    display: none;
  }
  .horizontal-type-btn-group {
    display: block;
  }
}


</style>

</head>

<body>

  {% include 'chat/main.html' %}
  {% include 'common/explore.html' %}
  {% include 'common/collapse.html' %}

  <!-- Static navbar -->
<!-- Static navbar -->
  <nav class="navbar fixed-top navbar-expand-lg navbar-dark" style="background-color: #6b0b0b !important;">
    <div class="container">
      <button class="navbar-toggler" type="button" onclick="toggleCollapse()">
        <span class="navbar-toggler-icon"></span>
      </button>
      

      <div>
      <div id="search" style="position: fixed; top: -5px; left: 35%"></div>
        <input type="hidden" id="submitUrl" value="{{ url_for('utils.search') }}"/>
        <input type="hidden" id="searchUrl" value="{{ url_for('utils.searchFilter') }}"/>
        <script type="text/babel" src="{{ url_for('static', filename='js/search?version=1.js') }}"></script>
      </div>

      <div class="collapse navbar-collapse" id="navbarTogglerDemo03">
        <a class="navbar-brand" href="{{ url_for('utils.index') }}">Readeon</a>
        <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
          <li class="nav-item">
            <a class="nav-link" onclick="toggleCategory()" style="padding-top: 10px; cursor: pointer;"> Explore </a>
          </li>
        </ul>

        <!-- Right account-related menu -->
        <ul class="navbar-nav ml-auto my-2 my-lg-0">
          {% if current_user.is_authenticated %}

            {% if current_user.role == "admin" %}
            <li class="nav-item">
              <a class="nav-link" href="{{ url_for('users.admin_view_users') }}">Admin Page</a>
            </li>
            {% else %}
            <!-- New writing: article, video, question in forum -->
            <li class="nav-item dropdown">
              <a class="nav-link" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                <i class="fas fa-edit fa" style="font-size: 22pt; margin-top: 1px"></i>
                <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
                  <a class="dropdown-item disabled" style="color: gray;">New</a>
                  <div class="dropdown-divider"></div>
                  <a class="dropdown-item" href="{{ url_for('pdfs.upload_pdf') }}">Article</a>
                  <a class="dropdown-item" href="{{ url_for('videos.upload_video') }}">Video</a>
                  <div class="dropdown-divider"></div>
                  <a class="dropdown-item" href="{{ url_for('articles.write_article') }}">Question in forum</a>
                </div>
              </li>
              <!-- Chat -->
              <li class="nav-item">
                <a class="nav-link" onclick="openChat()">
                  <i class="fas fa-envelope-open fa" style="font-size: 22pt; margin-top: 1px"></i>
                </a>
              </li>
              <!-- Profiles and accounts -->
              <li class="nav-item dropdown">
                <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                  <img src="{{ url_for('static', filename='image/user/' + current_user.thumbnail) }}" style="width: 30px; height: 30px; border-radius: 50%"></a>
                  <div class="dropdown-menu dropdown-menu-right" aria-labelledby="navbarDropdown">
                    <a class="dropdown-item" href="{{ url_for('users.user_profile', user_id = current_user.id) }}">My Profile</a>
                    <a class="dropdown-item" href="{{ url_for('users.account_setting') }}">Account Setting</a>
                    <div class="dropdown-divider"></div>
                    <a class="dropdown-item" href="{{ url_for('users.logout') }}">Sign Out</a>
                  </div>
                </li>
                {% endif %}
              {% else %}
              <li class="nav-item">
                <a class="nav-link" href="{{ url_for('users.login') }}" id=btn-login>Log In</a>
              </li>
              {% endif %}
            </ul>
            <!-- Right account-related menu end -->
          </div>
        </div>
      </nav>
      <!-- Static navbar end -->

      <!-- Static navbar end -->


      <!-- Additional navbar for contents type: horizontal or vertical -->

      <div class="horizontal-type-btn-group">
        <div class="btn-group-box">
          {% for type in TYPE %}
          <a href = '{{ url_for(type.link) }}'>{{ type.name }}</a>
          {% endfor %}
        </div>
      </div>

      <div class="vertical-type-btn-group btn-group-vertical" role="group" aria-label="Basic example">
        {% for type in TYPE %}
        <button type="button" class="btn btn-secondary" onclick = "location.href = '{{ url_for(type.link) }}' " >
          <i class="fa fa-{{ type.icon }}" aria-hidden="true"></i><br/>{{ type.name }}
        </button>
        {% endfor %}
      </div>

      <!-- Additional navbar for contents type end -->


  <div class="content-header" style="margin-top: 58px;">
    {% block contentHeader %}
    {% endblock %}
  </div>

  <div class="container">
    <div class="content" style="margin: 20px; margin-top: 100px;">
      <!-- flash messages -->
      {% for error_message in get_flashed_messages(category_filter=["error"]) %}
      <div class="alert alert-danger alert-dismissible">{{ error_message }}</div>
      {% endfor %}

      {% for success_message in get_flashed_messages(category_filter=["success"]) %}
      <div class="alert alert-success alert-dismissible">{{ success_message }}</div>
      {% endfor %}

      {% for info_message in get_flashed_messages(category_filter=["info"]) %}
      <div class="alert alert-info alert-dismissible">{{ info_message }}</div>
      {% endfor %}

      <!-- child template -->
      {% block content %}
      {% endblock %}

    </div>

    <div class="footer" style="padding-top: 30px !important ;">
      <hr/>
      Copyright © 2018 Readeon
    </div>
  </div><!-- /.container -->

 

  <!-- scripts -->
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.3/umd/popper.min.js" integrity="sha384-vFJXuSJphROIrBnz7yo7oB41mKfc8JzQZiCq4NCceLEaO4IHwicKwpJf9c9IpFgh" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0-beta.2/js/bootstrap.min.js" integrity="sha384-alpBpkh1PFOepccYVYDB4do5UnbKysX5WZXm3XxPqe5iKTfUKjNkCk9SaVuEZflJ" crossorigin="anonymous"></script>
  <script src="http://vjs.zencdn.net/6.4.0/video.js"></script>
  <script>
    function openChat() {
      document.getElementById("chat").style.width = "500px";
      document.getElementById("chat").scrollTop = 999999999;
    }
    function closeChat() {
      document.getElementById("chat").style.width = "0";
    }
    function toggleCategory() {
      var cat = document.getElementById("category");
      if (cat.style.display === "none") {
        cat.style.display = "block";
      } else {
        cat.style.display = "none";
      }
    }

    function toggleCollapse() {
      var col = document.getElementById("collapse");
      if (col.style.display === "none") {
        col.style.display = "block";
      } else {
        col.style.display = "none";
      }
    }
  </script>


</body>
</html>